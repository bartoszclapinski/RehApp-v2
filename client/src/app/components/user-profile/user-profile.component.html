<div class="profile-container">
  <mat-card class="wide-card">
    <mat-card-header>
      <mat-card-title>User Profile</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
        <div class="two-column-form">
          <div class="form-column">
            <mat-form-field appearance="fill">
              <mat-label>Email</mat-label>
              <input matInput formControlName="email" type="email">
              <mat-error *ngIf="userForm.get('email')?.hasError('required')">Email is required</mat-error>
              <mat-error *ngIf="userForm.get('email')?.hasError('email')">Please enter a valid email address</mat-error>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>First Name</mat-label>
              <input matInput formControlName="firstName">
              <mat-error *ngIf="userForm.get('firstName')?.hasError('required')">First name is required</mat-error>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>Last Name</mat-label>
              <input matInput formControlName="lastName">
              <mat-error *ngIf="userForm.get('lastName')?.hasError('required')">Last name is required</mat-error>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>Role</mat-label>
              <input matInput formControlName="role">
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>PESEL</mat-label>
              <input matInput formControlName="pesel">
              <mat-error *ngIf="userForm.get('pesel')?.hasError('required')">PESEL is required</mat-error>
            </mat-form-field>
          </div>
          <div class="form-column">
            <mat-form-field appearance="fill">
              <mat-label>Street</mat-label>
              <input matInput formControlName="street">
              <mat-error *ngIf="userForm.get('street')?.hasError('required')">Street is required</mat-error>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>City</mat-label>
              <input matInput formControlName="city">
              <mat-error *ngIf="userForm.get('city')?.hasError('required')">City is required</mat-error>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>Zip Code</mat-label>
              <input matInput formControlName="zipCode">
              <mat-error *ngIf="userForm.get('zipCode')?.hasError('required')">Zip code is required</mat-error>
              <mat-error *ngIf="userForm.get('zipCode')?.hasError('pattern')">Zip code must be in format XX-XXX</mat-error>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>Country</mat-label>
              <input matInput formControlName="country">
              <mat-error *ngIf="userForm.get('country')?.hasError('required')">Country is required</mat-error>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>Phone Number</mat-label>
              <input matInput formControlName="phoneNumber">
              <mat-error *ngIf="userForm.get('phoneNumber')?.hasError('required')">Phone number is required</mat-error>
            </mat-form-field>
          </div>
        </div>

        <div *ngIf="userType === 'doctor'" class="specific-fields">
          <mat-form-field appearance="fill">
            <mat-label>Specialization</mat-label>
            <input matInput formControlName="specialization">
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>License Number</mat-label>
            <input matInput formControlName="licenseNumber">
          </mat-form-field>
        </div>

        <div *ngIf="userType === 'nurse'" class="specific-fields">
          <mat-form-field appearance="fill">
            <mat-label>Department</mat-label>
            <input matInput formControlName="department">
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>License Number</mat-label>
            <input matInput formControlName="licenseNumber">
          </mat-form-field>
        </div>

        <div *ngIf="userType === 'admin'" class="specific-fields">
          <mat-form-field appearance="fill">
            <mat-label>Admin Level</mat-label>
            <input matInput formControlName="adminLevel">
          </mat-form-field>
        </div>

        <mat-card-actions>
          <button mat-flat-button class="action-button" type="button" (click)="toggleEdit()" *ngIf="!isEditing">Edit Profile</button>
          <button mat-flat-button class="action-button" type="submit" *ngIf="isEditing">Save Changes</button>
          <button mat-flat-button class="action-button cancel" type="button" (click)="cancelEdit()" *ngIf="isEditing">Cancel</button>
        </mat-card-actions>
      </form>
    </mat-card-content>
  </mat-card>
</div>
